{% extends 'base.html' %}
{% load static %}
{% block static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.css"/>
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>
<script>

    $(document).ready(function () {
        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            events: '/all_events',
            selectable: true,
            selectHelper: true,
            editable: true,
            eventLimit: true,
            select: function (start, end, allDay) {
                var title = prompt("Enter Event Title");
                if (title) {
                    var start = $.fullCalendar.formatDate(start, "Y-MM-DD HH:mm:ss");
                    var end = $.fullCalendar.formatDate(end, "Y-MM-DD HH:mm:ss");
                    $.ajax({
                        type: "GET",
                        url: '/add_event',
                        data: {'title': title, 'start': start, 'end': end},
                        dataType: "json",
                        success: function (data) {
                            calendar.fullCalendar('refetchEvents');
                            alert("Added Successfully");
                        },
                        error: function (data) {
                            alert('There is a problem!!!');
                        }
                    });
                }
            },
            eventResize: function (event) {
                var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");
                var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");
                var title = event.title;
                var id = event.id;
                $.ajax({
                    type: "GET",
                    url: '/update',
                    data: {'title': title, 'start': start, 'end': end, 'id': id},
                    dataType: "json",
                    success: function (data) {
                        calendar.fullCalendar('refetchEvents');
                        alert('Event Update');
                    },
                    error: function (data) {
                        alert('There is a problem!!!');
                    }
                });
            },

            eventDrop: function (event) {
                var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");
                var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");
                var title = event.title;
                var id = event.id;
                $.ajax({
                    type: "GET",
                    url: '/update',
                    data: {'title': title, 'start': start, 'end': end, 'id': id},
                    dataType: "json",
                    success: function (data) {
                        calendar.fullCalendar('refetchEvents');
                        alert('Event Update');
                    },
                    error: function (data) {
                        alert('There is a problem!!!');
                    }
                });
            },

            eventClick: function (event) {
                if (confirm("Are you sure you want to remove it?")) {
                    var id = event.id;
                    $.ajax({
                        type: "GET",
                        url: '/remove',
                        data: {'id': id},
                        dataType: "json",
                        success: function (data) {
                            calendar.fullCalendar('refetchEvents');
                            alert('Event Removed');
                        },
                        error: function (data) {
                            alert('There is a problem!!!');
                        }
                    });
                }
            },

        });
    });

</script>

{% endblock static %}
{% block content %}
                <!-- ### $App Screen Content ### -->
                <main class="main-content bgc-grey-100">
                  <div id="mainContent">
                    <div class="container-fluid">
                      <div class="row">
                        <div class="col-md-4">
                          <div class="bdrs-3 ov-h bgc-white bd">
                            <div class="bgc-deep-purple-500 ta-c p-30">
                              <h1 class="fw-300 mB-5 lh-1 c-white">01<span class="fsz-def">st</span></h1>
                              <h3 class="c-white">Monday</h3>
                            </div>
                            <div class="pos-r">
                              <button type="button" class="mT-nv-50 pos-a r-10 t-2 btn cur-p bdrs-50p p-0 w-3r h-3r btn-warning">
                                <i class="ti-plus"></i>
                              </button>
                              <ul class="m-0 p-0 mT-20">
                                <li class="bdB peers ai-c jc-sb fxw-nw">
                                  <a class="td-n p-20 peers fxw-nw mR-20 peer-greed c-grey-900" href="javascript:void(0);" data-toggle="modal" data-target="#calendar-edit">
                                    <div class="peer mR-15">
                                      <i class="fa fa-fw fa-clock-o c-red-500"></i>
                                    </div>
                                    <div class="peer">
                                      <span class="fw-600">All Day Event</span>
                                      <div class="c-grey-600">
                                        <span class="c-grey-700">Nov 01 - </span>
                                        <i>Website Development</i>
                                      </div>
                                    </div>
                                  </a>
                                  <div class="peers mR-15">
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-deep-purple-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-pencil"></i>
                                      </a>
                                    </div>
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-red-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-trash"></i>
                                      </a>
                                    </div>
                                  </div>
                                </li>
                                <li class="bdB peers ai-c jc-sb fxw-nw">
                                  <a class="td-n p-20 peers fxw-nw mR-20 peer-greed c-grey-900" href="javascript:void(0);" data-toggle="modal" data-target="#calendar-edit">
                                    <div class="peer mR-15">
                                      <i class="fa fa-fw fa-clock-o c-blue-500"></i>
                                    </div>
                                    <div class="peer">
                                      <span class="fw-600">All Day Event</span>
                                      <div class="c-grey-600">
                                        <span class="c-grey-700">Nov 01 - </span>
                                        <i>Website Development</i>
                                      </div>
                                    </div>
                                  </a>
                                  <div class="peers mR-15">
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-deep-purple-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-pencil"></i>
                                      </a>
                                    </div>
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-red-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-trash"></i>
                                      </a>
                                    </div>
                                  </div>
                                </li>
                                <li class="bdB peers ai-c jc-sb fxw-nw">
                                  <a class="td-n p-20 peers fxw-nw mR-20 peer-greed c-grey-900" href="javascript:void(0);" data-toggle="modal" data-target="#calendar-edit">
                                    <div class="peer mR-15">
                                      <i class="fa fa-fw fa-clock-o c-indigo-500"></i>
                                    </div>
                                    <div class="peer">
                                      <span class="fw-600">All Day Event</span>
                                      <div class="c-grey-600">
                                        <span class="c-grey-700">Nov 01 - </span>
                                        <i>Website Development</i>
                                      </div>
                                    </div>
                                  </a>
                                  <div class="peers mR-15">
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-deep-purple-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-pencil"></i>
                                      </a>
                                    </div>
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-red-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-trash"></i>
                                      </a>
                                    </div>
                                  </div>
                                </li>
                                <li class="bdB peers ai-c jc-sb fxw-nw">
                                  <a class="td-n p-20 peers fxw-nw mR-20 peer-greed c-grey-900" href="javascript:void(0);" data-toggle="modal" data-target="#calendar-edit">
                                    <div class="peer mR-15">
                                      <i class="fa fa-fw fa-clock-o c-green-500"></i>
                                    </div>
                                    <div class="peer">
                                      <span class="fw-600">All Day Event</span>
                                      <div class="c-grey-600">
                                        <span class="c-grey-700">Nov 01 - </span>
                                        <i>Website Development</i>
                                      </div>
                                    </div>
                                  </a>
                                  <div class="peers mR-15">
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-deep-purple-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-pencil"></i>
                                      </a>
                                    </div>
                                    <div class="peer">
                                      <a href="http://symfonator.herokuapp.com/admin/calendar" class="td-n c-red-500 cH-blue-500 fsz-md p-5">
                                        <i class="ti-trash"></i>
                                      </a>
                                    </div>
                                  </div>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-8 container">
                          <div id="calendar" class="fc fc-unthemed fc-ltr">
                            
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </main>
{% endblock content %}